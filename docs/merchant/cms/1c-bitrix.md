---
layout: default
nav_order: 10
title: "1С Битрикс"
parent: "Модули для CMS"
grand_parent: "Приём платежей"
date: 2023-10-25 00:00:00 +0300
---

# Описание модуля 1С Битрикс

![1С Битрикс](/assets/images/cms/1s_bitrix.svg){: .img-right}

Модуль 1С Битрикс предоставляет простую возможность подключить ваш интернет-магазин к системе оплаты «Инвойсбокс».

Модуль поддерживает два режима работы - с системой «Инвойсбокс» версии 3, а также с устаревшей версией 2.
**Поддержка 2 версии осуществляется, но создавать новые магазины, используя её не рекомендуется**
Версию вашего подключения уточняйте у вашего персонального менеджера или в [службе поддержки](https://www.invoicebox.ru/ru/contacts/feedback.html) системы.

{: .important }
> В случае, если у вас возникнут сложности при самостоятельной установке модуля и его корректной настройке,
пожалуйста, обратитесь к специалистам [службы поддержки](https://www.invoicebox.ru/ru/contacts/feedback.html).

## Установка модуля

Зайдите в Marketplace и введите "Инвойсбокс" в поле поиска и установите расширение
![1С Битрикс](/assets/images/cms/1c-bitrix/7.jpg){: .img }

Затем добавьте новую платёжную систему в настройках магазина
![1С Битрикс](/assets/images/cms/1c-bitrix/8.jpg){: .img }

На открывшейся странице:

1. Выберите "Обработчик": «Инвойсбокс» (invoicebox);

2. Выберите версию платёжной системы: Инвойсбокс v2 или Инвойсбокс v3;
3. Если требуется измените "Заголовок" и "Название";
2. Выберите версию платёжной системы: Инвойсбокс l3(текущий) или Инвойсбокс v3(новый);
3. Если требуется, измените "Заголовок" и "Название";
4. **(обязательно)** Укажите кодировку "UTF-8";
5. **(обязательно)** Снимите, если установлены, 2 чекбокса "Разрешить печать чеков" и "Открывать в новом окне".

![1С Битрикс](/assets/images/cms/1c-bitrix/1.jpg){: .img }

В блоке «Настройка обработчика ПС» настройте следующие параметры:

![1С Битрикс](/assets/images/cms/1c-bitrix/2.png){: .img }

- В случае выбора в типе платежной системы версии Инвойсбокс v3, требуется заполнить поля из блока «Настройки подключения к Инвойсбокс v3»:
  - Идентификатор магазина -  укажите идентификатор магазина, полученный при заключении договора;
- В случае выбора в типе платежной системы версии Инвойсбокс l3(текущий), требуется заполнить поля из блока «Настройки подключения к Инвойсбокс v3»:
  - Идентификатор магазина - укажите идентификатор магазина, полученный при заключении договора;
  - Авторизационный токен - формируется в момент регистрации магазина в системе «Инвойсбокс» и направляется по электронной почте в письме «Об активации в системе «Инвойсбокс». В случае, если вы не получили данный ключ, вы можете сформировать его автоматически в личном кабинете (в разделе Настройки);
  - Ключ для проверки подписи запроса — данный ключ можно получить в настройках интеграции магазина в ЛК Инвойсбокс;
  - Тип позиции у товаров каталога, Тип позиции у доставки — выберите один из двух вариантов (Товар или Сервис), данные поля необходимы для чека;

![1С Битрикс](/assets/images/cms/1c-bitrix/3.png){: .img }

- В случае выбора в типе платёжной системы версии Инвойсбокс v2 **(не рекомендуется)**, требуется заполнить поля из блока «Настройки подключения к Инвойсбокс v2»:
  - ID магазина — укажите идентификатор магазина, полученный при заключении договора;
  - Региональный код магазина — укажите региональный код магазина, полученный при заключении договора;
  - API ключ — укажите ключ безопасности, полученный при заключении договора;
  - URL страницы для отправки уведомлений — данный параметр обычно не требуется редактировать, т. к. он устанавливается по умолчанию и значение обязательно должно быть в виде http(s)://адрес_сайта/bitrix/tools/invoicebox/notification.php;
  - Тестовый режим - включите его для проведения тестовых платежей, при включении этого режима, вы пройдете все шаги в платежном терминале Инвойсбокс, но деньги с вашей карты списаны не будут.

![1С Битрикс](/assets/images/cms/1c-bitrix/2.png){: .img }


- Для любой выбранного типа платежной системы необходимо заполнить настройки в блоки «Основная»:
  - Автоматически оплачивать заказ при получении успешного статуса - при включении режима как только на сайт будет поступать информация об успешной оплате, заказ автоматически будет оплачиваться;
  - URL страницы для возврата на сайт Магазина  — при необходимости отредактируйте путь к странице для возврата на сайт Магазина;
    
## Настройка интернет-магазина

В административном разделе сайта перейдите на страницу «Настройки» → «Настройки продукта» → «Настройки модулей» → «Интернет-магазин»
и во вкладке «Автоматизация процессов» настройте смену статусов заказа при получении оплаты.

## Настройка в личном кабинете Инвойсбокс (для версии 2)

- Перейдите в свой [личный кабинет](https://business.invoicebox.ru/) и авторизуйтесь;
- Перейдите в раздел «Начало работы» → «Настройки» → «Мои магазины» во вкладке «Уведомления по протоколу»:
  - Выберите «Тип уведомления»: "Оплата/HTTP/Post (HTTP POST запрос с данными оплаты в переменных)";
  - В поле "URL уведомления" укажите адрес Вашего сайта `http://<адрес_вашего_сайта>/bitrix/tools/invoicebox/notification.php`
  - Проверьте корректность работы получения уведомления, нажав на кнопку «Отправить тестовый запрос»;
  - После проверки нажмите на кнопку «Сохранить».

## Настройка в личном кабинете Инвойсбокс (для версии 3)

- Перейдите в свой [личный кабинет](https://business.invoicebox.ru/) и авторизуйтесь;
- Перейдите в раздел «Начало работы» → «Настройки» → «Мои магазины» во вкладке «Уведомления по протоколу»:
  - Выберите «Тип уведомления»: "API l3";
  - В поле "URL уведомления" укажите адрес Вашего сайта `http://<адрес_вашего_сайта>/bitrix/tools/invoicebox/notification_v3.php`
  - Нажмите на кнопку «Сохранить».

---

[Проект на github](https://github.com/InvoiceBox/1c-bitrix)

