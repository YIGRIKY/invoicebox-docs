---
layout: nocompress
nav_order: 10
title: "Схема взаимодействия"
parent: "Подтверждение оплаты"
grand_parent: "Приём платежей"
---

# Схема партнёрского взаимодействия

<div class="mermaid">
sequenceDiagram
    autonumber
    participant Покупатель
    participant Магазин
    participant Инвойсбокс
    rect rgb(204, 245, 204)
      Покупатель->>Магазин: Выбор способа оплаты в сервисе Магазина
      Магазин->>Инвойсбокс: Вызов метода создания счёта по заказу
      Магазин->>Инвойсбокс: Вызов метода проверки возможности оплаты заказа
      Магазин->>Инвойсбокс: Вызов метода запроса кода подтверждения
      Инвойсбокс->>Покупатель: Отправка кода потверждения
      Покупатель->>Магазин: Подтверждение кода оплаты счёта
      Магазин->>Инвойсбокс: Вызов метода подтверждения оплаты счёта
    end
</div>

1. Покупатель оформляет заказ и выбирает способ оплаты.
1. Магазин передаёт [через метод API](/docs/merchant/order/create/) заказ в систему &laquo;Инвойсбокс&raquo;.
1. Магазин запрашивает [через метод API](/docs/merchant/guarantee/validate/) возможность подтверждения оплаты заказа выбранным пособом в системе &laquo;Инвойсбокс&raquo;.
1. Магазин запрашивает [через метод API](/docs/merchant/guarantee/code/) отправку кода подтверждения покупателю.
1. Система &laquo;Инвойсбокс&raquo; направляет покупателю код подтверждения.
1. Покупатель указывает код подтверждения в системе Магазина.
1. Система Магазина подтверждает оплату счёта в системе &laquo;Инвойсбокс&raquo; с использованием кода [через метод API](/docs/merchant/guarantee/pay/).

---

[Читать далее &raquo;](/docs/merchant/guarantee/validate/){: .btn .btn-primary .fs-5 .mb-4 .mb-md-0 .mr-2 }

