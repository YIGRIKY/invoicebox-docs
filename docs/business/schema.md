---
layout: nocompress
nav_order: 10
title: "Схема взаимодействия"
parent: "Инвойсбокс.Бизнес"
date: 2023-11-14 00:00:00 +0300
---

# Автоматизация оплаты счетов с использованием гарантийного фонда

Предложенная схема описывает взаимодействие, позволяющее системе организации получать
информацию  по счёту и подтверждать его оплату с использованием гарантийного фонда.

<div class="mermaid">
sequenceDiagram
    autonumber
    participant Организация
    participant Инвойсбокс
    rect rgb(204, 245, 204)
      Организация->>Инвойсбокс: Вызов метода получения информации по счёту
      Организация->>Инвойсбокс: Вызов метода подтверждения оплаты счёта
      Инвойсбокс->>Организация: Изменение размера гарантийного фонда
    end
</div>

1. Система организации получает информацию по счёту из системы &laquo;Инвойсбокс.Бизнес&raquo; [через метод API](/docs/business/get/).
1. Система организации подтверждает оплату счёта в системе &laquo;Инвойсбокс.Бизнес&raquo; [через метод API](/docs/business/confirm_payment/).
1. Система &laquo;Инвойсбокс&raquo; изменяет размер гарантийного фонда партнёра.


# Схема взаимодействия для систем программ лояльности

Предложенная схема описывает взаимодействие, позволяющие интегрировать систему программы лояльности
в качестве платёжного инструмента Инвойсбокс.

Например, у покупателя есть счёт (баланс) внутри программы лояльности, кафетерия льгот или иной системы,
с помощью которой, он хочет приобрести товары или услуги используя систему Инвойсбокс. Оператор
системы программы лояльности регистрируется в системе Инвойсбокс и размещает гарантийный фонд.

<div class="mermaid">
sequenceDiagram
    autonumber
    participant Покупатель
    participant Партнёр
    participant Инвойсбокс
    rect rgb(204, 245, 204)
      Покупатель->>Партнёр: Выбор способа оплаты и переход на страницу партнёра
      Партнёр->>Инвойсбокс: Вызов метода получения информации по счёту
      Покупатель->>Партнёр: Подтверждение оплаты счёта
      Партнёр->>Инвойсбокс: Вызов метода подтверждения оплаты счёта
      Инвойсбокс->>Партнёр: Изменение размера гарантийного фонда
      Партнёр->>Покупатель: Перенаправление на платёжную страницу
    end
</div>

1. Покупатель оформляет заказ и выбирает способ оплаты через систему партнёра. Покупатель перенаправляется на страницу авторизации партнёра с идентификатором счёта. Ссылка на страницу авторизации предоставляется платёжным инструментом. Также могут быть переданы ссылки возврата на случай обработки негативных сценариев при работе с API.
1. Система партнёра получает информацию по счёту из системы &laquo;Инвойсбокс.Бизнес&raquo; [через метод API](/docs/business/get/).
1. Покупатель подтверждает оплату счёта.
1. Система партнёра подтверждает оплату счёта в системе &laquo;Инвойсбокс.Бизнес&raquo; [через метод API](/docs/business/confirm_payment/).
1. Система &laquo;Инвойсбокс&raquo; изменяет размер гарантийного фонда партнёра.
1. Партнёр перенаправляет покупателя по полученной ссылке (в запросе информации по счёту) на платёжную страницу системы &laquo;Инвойсбокс&raquo;.

---

[Читать далее &raquo;](/docs/dictionary/){: .btn .btn-primary .mb-4 .mb-md-0 .mr-2 }

